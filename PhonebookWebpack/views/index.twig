{% extends 'layout.twig' %}

{% block body %}
    {% verbatim %}
<div id="app" class="container" v-cloak>
    <form class="col-12 col-md-6 justify-content-center mx-auto" id="form" novalidate>
        <label class="m-4 justify-content-center row">Имя:
            <input v-model.trim="name"
                   id="name-input"
                   type="text"
                   class="form-control"
                   aria-describedby="name-error-message"
                   required>
            <span class="error-message justify-content-center row invalid-feedback"
                  id="name-error-message">Введите имя</span>
        </label>

        <label class="m-4 justify-content-center row">Фамилия:
            <input v-model.trim="lastName" id="last-name-input"
                   type="text"
                   class="form-control"
                   aria-describedby="last-name-error-message"
                   required>
            <span class="error-message justify-content-center row invalid-feedback"
                  id="last-name-error-message">
                Введите фамилию
            </span>
        </label>

        <label class="m-4 justify-content-center row"> Номер телефона:
            <input v-model.trim="phone"
                   id="phone-number-input"
                   placeholder="+79234567890"
                   class="form-control"
                   required>
            <span class="error-message justify-content-center row invalid-feedback"
                  id="phone-error-message">Введите номер в формате: +79123456789</span>
        </label>

        <label class="m-4 justify-content-center row">
            <input @click.prevent="addContact"
                   type="submit"
                   class="add-button btn btn-success"
                   id="add-button"
                   value="Добавить">
        </label>
    </form>
    <table class="contacts-table table mt-3 table-striped table-hover" id="contacts-table">
        <thead>
        <tr class="table-head">
            <th>№</th>
            <th>Имя</th>
            <th>Фамилия</th>
            <th>Номер телефона</th>
            <th></th>
        </tr>
        </thead>
        <tbody class="contacts-table table-dark" id="tbody">
        <tr v-for="(contact, index) in contacts" :key="contact.id">
            <td v-text="index+1"></td>
            <td v-text="contact.name"></td>
            <td v-text="contact.lastName"></td>
            <td v-text="contact.phone"></td>
            <td>
                <button @click="putToDeleteContact(contact)"
                        class="btn delete-button btn-danger w-100"
                        data-bs-toggle="modal"
                        data-bs-target="#modal-dialog">
                    Удалить
                </button>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="modal fade bg-opacity-25" id="modal-dialog" tabindex="-1" aria-labelledby="modal-dialog-label"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-dialog-label">Вы уверены?</h5>
                </div>
                <div class="modal-footer">
                    <button @click="deleteContact"
                            class="btn bg-danger yes-button"
                            data-bs-dismiss="modal"
                            id="yes-button">
                        Да
                    </button>
                    <button class="btn btn-success" data-bs-dismiss="modal" id="no-button">Нет</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endverbatim %}
{% endblock %}
